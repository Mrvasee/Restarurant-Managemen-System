{%load static%}
<html>
    <head>
        <link rel="stylesheet" href="static/login.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <style>
          /* Styling for message boxes */
          .success-message, .error-message {
              display: none;
              padding: 10px;
              border-radius: 5px;
              margin-bottom: 10px;
          }
          .success-message {
            background-color:ghostwhite ; 
            color: green; 
            padding: 20px; 
            position: fixed; 
            top: 50%; 
            left: 50%; 
            transform: translate(-50%, -50%); 
            border-radius: 10px; 
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); 
            z-index: 1000; 
            text-align: center; 
            font-size: 18px; 
            height: 30%;
        }
        h3{
          padding-top:25px;
        }
          .error-message {
              background-color: #f44336; 
              color: white; 
              padding: 30px; 
              position: fixed; 
              top: 45%; 
              left: 50%; 
              transform: translate(-50%, -50%); 
              border-radius: 10px; 
              box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); 
              z-index: 1000; 
              text-align: center; 
              font-size: 18px; 
          }
      </style>
      </head>
    <body>
         
            
        <div class="navigation">
            <nav class="navbar navbar-expand-lg navbar-light ">
                <div class="container-fluid">
                  
                  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                  </button>
                  <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                      <div class="btns">
                      <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="/home">Home</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="/Menus">Menu</a>
                      </li> 
                    </ul>  
                  </div>
                  </div>
                </div>
              </nav>
        <div class="main-container">
        <div class="login-container">
            

        <form method="POST" action="/login">
        {%csrf_token%}
        <input type="text" name="otp" placeholder="Enter OTP" required><br>
        

        <button  type="submit">Continue</button>
        
    </div>
</div>
    </form>
    
      <div class="success-message" id="successMessage">
        <h3>Your Order has been Placed successfully</h3>
        <p id="successMessageContent"> Redirecting to home page in <span id="countdownTimer">5</span> seconds...</p>
    </div>


  <!-- Error message box -->
  <div class="error-message" id="errorMessage">
      <h3>OTP does not match. Please try again.</h3>
  </div>


  <script>
      function showSuccessMessageAndRedirect() {
        var successMessage = document.getElementById('successMessage');
        successMessage.style.display = 'block'; // Show success message

        var countdown = 5; // Set the countdown duration in seconds
        var countdownTimer = document.getElementById('countdownTimer');

        var countdownInterval = setInterval(function() {
            countdownTimer.textContent = countdown; // Update countdown timer
            countdown--;
            if (countdown < 0) {
                clearInterval(countdownInterval);
                window.location.href = "/home"; // Redirect to home page
            }
        }, 1000); // Update the message every 1 second (1000 milliseconds)
    }
    // Function to show error message
    function showErrorMessage() {
        var errorMessage = document.getElementById('errorMessage');
        errorMessage.style.display = 'block'; // Show error message
    }

    // Check if OTP matches or not
    var otpMatched = {{ otp_matched|lower }};
    if (otpMatched) {
        showSuccessMessageAndRedirect();
    } else {
        showErrorMessage();
    }
</script>
    </body>
</html>